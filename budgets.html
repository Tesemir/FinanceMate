<h2>Your Budgets</h2>
<ul id="budgetList"></ul>

<script>
async function fetchBudgets() {
    const token = localStorage.getItem("token");

    if (!token) {
        alert("You need to log in first!");
        window.location.href = "login.html";
        return;
    }

    try {
        const response = await fetch("http://localhost:5000/api/budgets", {
            method: "GET",
            headers: { "Authorization": `Bearer ${token}` },
        });

        const budgets = await response.json();
        const budgetList = document.getElementById("budgetList");

        budgetList.innerHTML = ""; 
        budgets.forEach(budget => {
            const li = document.createElement("li");
            li.textContent = `${budget.category}: $${budget.limit}`;
            budgetList.appendChild(li);
        });
    } catch (error) {
        console.error("Error:", error);
        alert("Failed to fetch budgets.");
    }
}

fetchBudgets();
</script>